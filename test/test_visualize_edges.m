
source_dataset_folder = "/gpfs/data/bkimia/Datasets/ETH3D/";
dataset_sequence_path = "stereo/delivery_area/stereo_pairs/";
stereo_pair_name = "images_rig_cam4-1477843917481127523.png-images_rig_cam5-1477843917481127523.png";
img_path = source_dataset_folder + dataset_sequence_path + stereo_pair_name + "/im0.png";
img = imread(img_path);

target_edge = [571.981; 37.9429];
orientation = -0.769633;
edge_direction = [cos(orientation); sin(orientation)];
shifted_point_plus = [568.501; 34.352];
shifted_point_minus = [575.46, 41.5337];

patch_plus_coordx = [564.2590481831713, 564.9549197213745, 565.6507912595775, 566.3466627977806, 567.0425343359838, 567.7384058741868, 568.4342774123899;
 564.9772144607972, 565.6730859990003, 566.3689575372033, 567.0648290754065, 567.7607006136095, 568.4565721518126, 569.1524436900157;
 565.695380738423, 566.391252276626, 567.0871238148291, 567.7829953530322, 568.4788668912353, 569.1747384294383, 569.8706099676415;
 566.4135470160487, 567.1094185542518, 567.8052900924549, 568.501161630658, 569.197033168861, 569.8929047070642, 570.5887762452672;
 567.1317132936745, 567.8275848318776, 568.5234563700807, 569.2193279082837, 569.9151994464869, 570.6110709846899, 571.306942522893;
 567.8498795713002, 568.5457511095034, 569.2416226477064, 569.9374941859095, 570.6333657241127, 571.3292372623157, 572.0251088005188;
 568.5680458489261, 569.2639173871291, 569.9597889253322, 570.6556604635354, 571.3515320017384, 572.0474035399415, 572.7432750781446];

patch_plus_coordy = [34.2851347773173, 35.00330105494307, 35.72146733256885, 36.43963361019463, 37.15779988782041, 37.87596616544619, 38.59413244307196;
 33.58926323911421, 34.30742951673999, 35.02559579436576, 35.74376207199154, 36.46192834961732, 37.18009462724309, 37.89826090486888;
 32.89339170091112, 33.61155797853689, 34.32972425616267, 35.04789053378845, 35.76605681141423, 36.48422308904001, 37.20238936666578;
 32.19752016270803, 32.91568644033381, 33.63385271795958, 34.35201899558536, 35.07018527321114, 35.78835155083691, 36.50651782846269;
 31.50164862450494, 32.21981490213071, 32.93798117975649, 33.65614745738227, 34.37431373500805, 35.09248001263383, 35.8106462902596;
 30.80577708630185, 31.52394336392762, 32.24210964155341, 32.96027591917918, 33.67844219680496, 34.39660847443074, 35.11477475205651;
 30.10990554809876, 30.82807182572454, 31.54623810335031, 32.26440438097609, 32.98257065860187, 33.70073693622765, 34.41890321385343];

patch_minus_coordx = [571.2177635652023, 571.9136351034055, 572.6095066416085, 573.3053781798116, 574.0012497180147, 574.6971212562178, 575.3929927944208;
 571.9359298428282, 572.6318013810312, 573.3276729192343, 574.0235444574374, 574.7194159956405, 575.4152875338435, 576.1111590720467;
 572.6540961204539, 573.349967658657, 574.04583919686, 574.7417107350632, 575.4375822732662, 576.1334538114693, 576.8293253496724;
 573.3722623980797, 574.0681339362827, 574.7640054744859, 575.4598770126889, 576.155748550892, 576.8516200890951, 577.5474916272982;
 574.0904286757054, 574.7863002139086, 575.4821717521116, 576.1780432903147, 576.8739148285179, 577.5697863667209, 578.265657904924;
 574.8085949533312, 575.5044664915343, 576.2003380297374, 576.8962095679404, 577.5920811061436, 578.2879526443467, 578.9838241825497;
 575.526761230957, 576.2226327691601, 576.9185043073632, 577.6143758455663, 578.3102473837694, 579.0061189219724, 579.7019904601756];

patch_minus_coordy = [41.46679755357508, 42.18496383120085, 42.90313010882663, 43.62129638645241, 44.33946266407819, 45.05762894170397, 45.77579521932974;
 40.77092601537199, 41.48909229299777, 42.20725857062354, 42.92542484824932, 43.6435911258751, 44.36175740350087, 45.07992368112666;
 40.0750544771689, 40.79322075479467, 41.51138703242045, 42.22955331004624, 42.94771958767201, 43.66588586529779, 44.38405214292357;
 39.37918293896581, 40.09734921659159, 40.81551549421737, 41.53368177184314, 42.25184804946892, 42.9700143270947, 43.68818060472047;
 38.68331140076272, 39.4014776783885, 40.11964395601427, 40.83781023364005, 41.55597651126583, 42.27414278889161, 42.99230906651739;
 37.98743986255963, 38.70560614018541, 39.42377241781119, 40.14193869543696, 40.86010497306274, 41.57827125068852, 42.29643752831429;
 37.29156832435654, 38.00973460198232, 38.72790087960809, 39.44606715723387, 40.16423343485965, 40.88239971248543, 41.60056599011121];

figure(1);
imshow(img); hold on;
plot(target_edge(1), target_edge(2), "cs", 'LineWidth', 1.2); hold on;
quiver(target_edge(1), target_edge(2), edge_direction(1), edge_direction(2), 0, 'c-', 'LineWidth', 1.2);

plot(shifted_point_plus(1), shifted_point_plus(2), "ms", 'LineWidth', 1.2); hold on;
plot(shifted_point_minus(1), shifted_point_minus(2), "ms", 'LineWidth', 1.2); hold on;
hold on;
for i = 1:7
    for j = 1:7
        plot(patch_plus_coordx(i,j), patch_plus_coordy(i,j), "ys"); hold on;
        plot(patch_minus_coordx(i,j), patch_minus_coordy(i,j), "ys"); hold on;
    end
end

